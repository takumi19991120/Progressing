<div class="container">
<h3 class="table-secondary d-inline-flex pl-5 pr-5 mt-5">投稿詳細</h3>
 <div class="row">

  <div class="col-11 mt-5">
   <table class="table table-borderless">
    <tr>
     <td><%= image_tag @song.user.get_image, size:'50x50' %></td>
     <th><%= @song.user.name %></th>
    </tr>
    <tr>
     <th class="text-center">ジャンル</th>
     <td><%= @song.genre.name %></td>
    </tr>
    <tr>
     <th class="text-center">曲名</th>
     <td><%= @song.title %></td>
    </tr>
    <tr>
     <th class="text-center">投稿内容</th>
     <td><%= @song.body %><td>
    </tr>
    <tr>
     <th class="text-center">いいね</th>
     <td><%= render "public/favorites/favorites", song: @song %></td> 
    </tr>
   </table>

   <div class="text-center">
    <% if @user == current_user %>
    <%= link_to "編集する", edit_song_path(@song), class: "btn btn-success" %>
    <%= link_to 'Destroy', song_path(@song), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-danger"%>
    <% end %>
   </div>

   <%= form_with model: [@song, @comment], local: false do |f| %>
    <%= f.text_area :content, rows:'5',placeholder: "Any comments on this post?", class:"form-control mt-3"  %>
     <div class="text-right">
      <%= f.submit "Submit", class: "btn btn-primary mt-3 mb-3" %>
     </div>
   <% end %>

<table>
  <tbody>
    <% @song_comments.each do |comment| %>
    <tr>
      <td>
        <%= link_to user_path(comment.user) do %>
          <%= image_tag comment.user.get_image, size: "50x50" %><br>
          <%= comment.user.name %>
        <% end %>
      </td>
      <td><%= comment.content %></td>
      <td>
        <% if comment.user == current_user %>
          <%= link_to "Destroy", song_comment_path(@song, comment), method: :delete, class: "btn btn-sm btn-danger float-end", remote: true %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
  </div>
 </div>
</div>