<div class="container">

<h3 class="table-secondary d-inline-flex pl-5 pr-5 mt-5">投稿一覧</h3>

<div class="search_form pe-3">
<%= search_form_for @q, url: songs_path do |f| %>
   <%= f.search_field :title_or_body_or_genre_cont, class: 'form-control', placeholder: '検索ワード' %>
   <%= f.submit '検索', class: 'btn btn-primary' %>
<% end %>
</div>

 <div class="row">

<table class='table table-hover table-inverse'>
  <thead>
    <tr>
      <th>ユーザー画像/ユーザー名</th>
      <th>ジャンル</th>
      <th>曲名</th>
      <th>投稿内容</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @songs.each do |song| %>
      <tr>
        <td>
          <%= image_tag song.user.get_image, size:'50x50' %></br>
          <%= song.user.name %>
        </td>
        <td><%= song.genre.name %></td>
        <td><%= link_to song.title, song_path(song.id) %></td>
        <td><%= song.body %></td>
        <td>
          <% if song.favorited?(current_user) %>
          <%= link_to song_favorites_path(song), method: :delete, remote: true do %>
          <i class="fas fa-heart" aria-hidden="true" style="color: red;"></i>
          <%= song.favorites.count %>
          <% end %>
          <% else %>
          <%= link_to song_favorites_path(song), method: :post, remote: true do %>
          <i class="fas fa-heart" aria-hidden="true"></i>
          <%= song.favorites.count %>
          <% end %>
          <% end %>
        </td>
        <td>
          <i class="fa-regular fa-comment"></i>
          <%= song.comments.count %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
  </div>
 </div>
</div>